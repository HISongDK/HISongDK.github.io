---
title: NodeJS | JavaScript 异步编程与回调
tags: NodeJS
categories:
  - 随敲
  - NodeJS
date: 2022-02-12 23:43:46
---

## 编程语言中的异步性

计算机在设计上是异步的。

异步意味着事情可以独立于主程序流发生。

在当前的用户计算机中，每个程序都运行于特定的时间段，然后停止执行，以让另一个程序继续执行。这件事运行得如此之快，以至于无法察觉。我们以为计算机可以同时运行许多程序，但这是一种错觉。（在多处理器计算机上除外）

程序在内部会使用中断，一种被发送到处理器以获取系统关注的信号。

这里不会深入探讨这个问题，只要记住，**程序是异步的且会暂停执行知道需要关注**，这使得计算机可以同时执行其他操作。当程序正在等待来自网络的响应时，则它无法在请求完成之前停止处理器。

通常，编程语言是同步的，有些会在语言或库中提供管理异步性的方法。默认情况下，C、Java、C#、PHP、Go、Ruby、Swift 和 Python 都是同步的。其中一些语言通过使用线程来处理异步操作（衍生新的线程）。

<!-- more -->

## JavaScript

JavaScript 默认情况下是同步的，并且是单线程。**这意味着代码无法创建新的线程并且不能并行执行。**

代码行是依次执行的，例如：

```js
const a = 1
const b = 2
const c = a * b
console.log(c)
doSomething()
```

但是 JavaScript 诞生于浏览器内部，一开始的主要工作是响应用户的操作，例如 `onClick` 、`onMouseOver` 、`onChange` 、`onSubmit` 等。使用同步的编程模型该如何做到这一点？

答案就在于它的环境。浏览器通过提供一组可以处理这种功能的 API 来提供了一种实现方式。<!-- 没太懂啊 -->

更近点，Node.js 引入了非阻塞的 I/O 环境，以将该概念扩展到文件访问、网络调用等。
