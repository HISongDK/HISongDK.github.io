---
title: TS基础-声明文件
date: 2021-08-15 23:44:17
tags: ts
---

当使用第三方库时，我们需要引用它的声明文件，才能获得对应的代码补全、接口提示等功能。

<!-- more -->

## 新语法索引

用于本章中涉及大量新语法，故在本章开头列出新语法的索引，方便大家在使用这些新语法时能快速查找到对应的讲解；

- `declare var` 声明全局变量
- `declare function` 声明全局方法
- `declare class` 声明全局类
- `declare enum` 生命全局枚举类型
- `declare namespace` 声明（含有子属性的）全局对象
- `interface 和 type` 声明全局类型
- `export` 导出变量
- `export namespace` 导出（含有子属性的）对象
- `export default` ES6 默认导出
- `export =` commonjs 导出模块
- `export as namespace` UMD 库生命全局变量
- `declare global` 扩展全局变量
- `declare module` 扩展模块
- `/// <reference />` 三斜线指令

## 什么是声明语句

假如我们想要使用第三方库 jQuery，一种常见的方式是在 html 中通过 `<script>` 标签引入 jQuery，然后就可以使用全局变量 `$` 或 `jQuery` 了。

我们通常这样获取一 id 是 foo 的元素：

```js
$('#foo');
// or
jQuery('#foo')
```

但是在 ts 中，编译器并不知道 $ 或 jQuery 是什么东西：

```ts
jQuery('#foo')
// ERROR: Cannot find name 'jQuery'
```

这时，我们需要使用 `declare var` 来定义它的类型：

```ts
declare var jQuery:(selector:string):any;

jQuery('#foo')
```

上例中，`declare var`并没有真的定义一个变量，只是定义类全局变量 jQuery 的类型，仅仅用于编译时的检查，在编译结果中会被删除。它编译结果是：

```js
jQuery('#foo')
```

除了 `declare var` 之外，还有其他很多种声明语句，将会在后面详细介绍。

## 什么是声明文件

通常我们会把声明语句放到一个单独的文件（jQuery.d.ts)中，这就是声明文件：

```ts
// src/jQuery.d.ts

declare var jQuery：(select:string) => any
```

```ts
// src/index.ts

jQuery('#foo')
```

声明文件必须以`.d.ts`为后缀。

一般来说，ts 会解析项目中所有的`*.ts`文件，
